(function(f) {
    f.Buffers = function() {
        this._s = new Array;
        this.type = false;
        if (arguments[0] == "queue") {
            this.type = true
        }
    };
    f.Buffers.prototype = {
        push: function(j) {
            if (arguments.length == 0) {
                return false
            }
            for (var h = 0; h < arguments.length; h++) {
                this._s.push(arguments[h])
            }
            return this._s.length
        },
        append: function(h) {
            this.push(h)
        },
        pop: function() {
            if (this._s.length == 0) {
                return null
            } else {
                if (this.type) {
                    return this._s.pop()
                } else {
                    return this._s.shift()
                }
            }
        },
        getTop: function() {
            if (this._s.length == 0) {
                return null
            } else {
                if (this.type) {
                    return this._s[this._s.length - 1]
                } else {
                    return this._s[0]
                }
            }
        },
        getLast: function() {
            if (this._s.length == 0) {
                return null
            } else {
                if (this.type) {
                    return this._s[0]
                } else {
                    return this._s[this._s.length - 1]
                }
            }
        },
        size: function() {
            return this._s.length
        },
        empty: function() {
            this._s.length = 0
        },
        isEmpty: function() {
            if (this._s.length == 0) {
                return true
            } else {
                return false
            }
        },
        toString: function() {
            var h = this._s.join("");
            this._s.length = 0;
            return h
        },
        toArray: function() {
            return this._s
        }
    };
    f.browser.name = (navigator.userAgent.toLowerCase().match(/\b(chrome|opera|safari|msie|firefox)\b/) || ["", "mozilla"])[1];
    f.browser.core = (navigator.userAgent.toLowerCase().match(/msie|webkit|gecko|opera|khtml/) || "msie");
    f.browser.ver = f.browser.version;
    if (window.Base64) {
        return
    } else {
        function e(l) {
            var j,
            k,
            h,
            m;
            j = "";
            h = l.length;
            for (k = 0; k < h; k++) {
                m = l.charCodeAt(k);
                if ((m >= 1) && (m <= 127)) {
                    j += l.charAt(k)
                } else {
                    if (m > 2047) {
                        j += String.fromCharCode(224 | ((m >> 12) & 15));
                        j += String.fromCharCode(128 | ((m >> 6) & 63));
                        j += String.fromCharCode(128 | ((m >> 0) & 63))
                    } else {
                        j += String.fromCharCode(192 | ((m >> 6) & 31));
                        j += String.fromCharCode(128 | ((m >> 0) & 63))
                    }
                }
            }
            return j
        }
        function b(n) {
            var j,
            l,
            h,
            o;
            var m,
            k;
            j = "";
            h = n.length;
            l = 0;
            while (l < h) {
                o = n.charCodeAt(l++);
                switch (o >> 4) {
                case 0:
                case 1:
                case 2:
                case 3:
                case 4:
                case 5:
                case 6:
                case 7:
                    j += n.charAt(l - 1);
                    break;
                case 12:
                case 13:
                    m = n.charCodeAt(l++);
                    j += String.fromCharCode(((o & 31) << 6) | (m & 63));
                    break;
                case 14:
                    m = n.charCodeAt(l++);
                    k = n.charCodeAt(l++);
                    j += String.fromCharCode(((o & 15) << 12) | ((m & 63) << 6) | ((k & 63) << 0));
                    break
                }
            }
            return j
        }
        var a = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
        var g = new Array( - 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1);
        function c(o) {
            var k,
            m,
            h;
            var n,
            l,
            j;
            h = o.length;
            m = 0;
            k = "";
            while (m < h) {
                n = o.charCodeAt(m++) & 255;
                if (m == h) {
                    k += a.charAt(n >> 2);
                    k += a.charAt((n & 3) << 4);
                    k += "==";
                    break
                }
                l = o.charCodeAt(m++);
                if (m == h) {
                    k += a.charAt(n >> 2);
                    k += a.charAt(((n & 3) << 4) | ((l & 240) >> 4));
                    k += a.charAt((l & 15) << 2);
                    k += "=";
                    break
                }
                j = o.charCodeAt(m++);
                k += a.charAt(n >> 2);
                k += a.charAt(((n & 3) << 4) | ((l & 240) >> 4));
                k += a.charAt(((l & 15) << 2) | ((j & 192) >> 6));
                k += a.charAt(j & 63)
            }
            return k
        }
        function d(p) {
            var o,
            n,
            l,
            j;
            var m,
            h,
            k;
            h = p.length;
            m = 0;
            k = "";
            while (m < h) {
                do {
                    o = g[p.charCodeAt(m++) & 255]
                }
                while (m < h && o == -1);
                if (o == -1) {
                    break
                }
                do {
                    n = g[p.charCodeAt(m++) & 255]
                }
                while (m < h && n == -1);
                if (n == -1) {
                    break
                }
                k += String.fromCharCode((o << 2) | ((n & 48) >> 4));
                do {
                    l = p.charCodeAt(m++) & 255;
                    if (l == 61) {
                        return k
                    }
                    l = g[l]
                }
                while (m < h && l == -1);
                if (l == -1) {
                    break
                }
                k += String.fromCharCode(((n & 15) << 4) | ((l & 60) >> 2));
                do {
                    j = p.charCodeAt(m++) & 255;
                    if (j == 61) {
                        return k
                    }
                    j = g[j]
                }
                while (m < h && j == -1);
                if (j == -1) {
                    break
                }
                k += String.fromCharCode(((l & 3) << 6) | j)
            }
            return k
        }
        window.Base64 = {
            encode: function(h) {
                return c(e(h))
            },
            decode: function(h) {
                return b(d(h))
            }
        }
    }
    f.extend({
        getScript: function(k, j) {
            var h = true,
            n = [],
            l = true,
            m = new Function;
            if (arguments.length > 1) {
                switch (f.type(j)) {
                case "boolean":
                    h = j;
                    break;
                case "function":
                    m = j;
                    break;
                case "object":
                    h = f.type(j.cache) == "boolean" ? j.cache: h;
                    l = f.type(j.crossDomain) == "boolean" ? j.crossDomain: l;
                    m = f.type(j.callback) == "function" ? j.callback: m;
                    n = f.type(j.parameter) == "array" ? j.parameter: n;
                    break
                }
            }
            f.ajax({
                type: "GET",
                url: k,
                crossDomain: l,
                success: function(p, o, r) {
                    try {
                        m.apply(this, (n))
                    } catch(q) {
                        if (window.console) {
                            console.log(q)
                        }
                    }
                },
                dataType: "script",
                cache: h
            })
        },
        getscript: function(l, m) {
            var m = f.extend({},
            m);
            m._d = m._d || document;
            var j = m._d.getElementsByTagName("head")[0],
            k = m._d.createElement("script"),
            h = m.arg || [];
            k.type = "text/javascript";
            if (m._b) {
                k.innerHTML = m._b
            }
            if (l && l != "") {
                k.src = l
            }
            if (f.browser.msie) {
                k.onreadystatechange = function() {
                    var n = k.readyState;
                    if (n == "loaded" || n == "interactive" || n == "complete") {
                        this.parentNode.removeChild(this);
                        if (m.callback) {
                            return m.callback.apply(this, (h || []))
                        }
                    } else {
                        k.src = l
                    }
                }
            } else {
                k.onload = function() {
                    this.parentNode.removeChild(this);
                    if (m.callback) {
                        return m.callback.apply(this, (h || []))
                    }
                }
            }
            j.appendChild(k)
        },
        cookie: function(l, m, j) {
            if (arguments.length == 0) {
                try {
                    if (navigator.cookieEnabled == false) {
                        return false
                    }
                } catch(o) {
                    if (window.console) {
                        console.info(o)
                    }
                }
                return true
            }
            if (arguments.length > 1 && String(m) !== "[object Object]") {
                j = f.extend({},
                j);
                if (m === null || m === undefined) {
                    j.expires = -1
                }
                if (typeof j.expires === "number") {
                    var p = j.expires,
                    k = j.expires = new Date();
                    k.setDate(k.getDate() + p)
                }
                m = String(m);
                return (document.cookie = [encodeURIComponent(l), "=", j.raw ? m: encodeURIComponent(m), j.expires ? "; expires=" + j.expires.toUTCString() : "", j.path ? "; path=" + j.path: "", j.domain ? "; domain=" + j.domain: "", j.secure ? "; secure": ""].join(""))
            }
            j = m || {};
            var h,
            n = j.raw ? 
            function(q) {
                return q
            }: decodeURIComponent;
            return (h = new RegExp("(?:^|; )" + encodeURIComponent(l) + "=([^;]*)").exec(document.cookie)) ? n(h[1]) : ""
        },
        getParm: function(k, q) {
            var p,
            n = window.location.toString(),
            j = k ? k: n;
            if (f.type(j) == "object") {
                p = f.param(j);
                n = q ? q: n;
                if (n.indexOf("?") == -1) {
                    n += "?"
                } else {
                    n += "&"
                }
                return n += p
            } else {
                if (f.type(j) == "string") {
                    var h = j.split("?"),
                    l = h[1],
                    p = {};
                    if (l && l.indexOf("&")) {
                        var m = l.split("&");
                        jQuery.each(m, 
                        function(o, s) {
                            if (s && s.indexOf("=")) {
                                var r = s.split("=");
                                if (f.type(q) == "string" && q == r[0]) {
                                    p = r[1] == null ? "": r[1];
                                    return true
                                } else {
                                    p[r[0]] = r[1]
                                }
                            }
                        })
                    }
                }
            }
            return p
        },
        getUrl: function(j) {
            var j = j || window.location.toString(),
            k = /(\w+):\/\/([^\:|\/]+)(\:\d*)?(.*\/)([^#|\?|\n]+)?(#.*)?(\?.*)?/i;
            var h = j.match(k);
            if ( !! !h) {
                var k = j.match(/(\w+):\/\/(.*)/);
                h = [k ? k[0] : j, k ? k[1] : "", k ? k[2] : "", "", "", "", "", ""]
            }
            return h
        },
        getBrowserType: function() {
            var h = {
                msie: {
                    v6: 1,
                    v7: 5,
                    v8: 6,
                    v9: 8
                },
                firefox: 2,
                opera: 3,
                chrome: 7,
                safari: 4
            };
            return f.browser.name == "msie" ? h.msie["v" + parseInt(f.browser.ver)] : h[f.browser.name]
        },
        getStrLen: function(p, l, n) {
            if (!p) {
                return
            }
            var r = /[^\x00-\xff]/ig,
            q = p.match(r);
            if (arguments.length == 1) {
                return p.length + (q == null ? 0: q.length)
            }
            var j = 0,
            o = "",
            m = "",
            h = p.replace(r, "**").length;
            for (var k = 0; k < h; k++) {
                m = p.charAt(k).toString();
                if (m.match(r) != null) {
                    j += 2
                } else {
                    j++
                }
                if (j > l) {
                    break
                }
                o += m
            }
            if (h > l && f.type(n) == "string") {
                o += n
            } else {
                if (h > l && f.type(n) == "boolean") {
                    o += "..."
                }
            }
            return o
        },
        getStringLen: function(h) {
            return f.getStrLen(h)
        },
        ParseTpl: function(m, l) {
            var h;
            var k = new RegExp("{{#([a-zA-z0-9]+)}}");
            while ((h = k.exec(m)) != null) {
                var j = l[h[1]] === 0 ? "0": l[h[1]] || "";
                m = m.replace(new RegExp(h[0], "g"), j)
            }
            return m
        }
    })
})(jQuery);