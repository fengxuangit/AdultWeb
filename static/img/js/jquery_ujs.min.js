(function(c,d){var a=function(){var e=c._data(document,"events");return e&&e.click&&c.grep(e.click,function(f){return f.namespace==="rails"}).length};if(a()){c.error("jquery-ujs has already been loaded!")}var b;c.rails=b={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(f){var e=c('meta[name="csrf-token"]').attr("content");if(e){f.setRequestHeader("X-CSRF-Token",e)}},fire:function(h,e,g){var f=c.Event(e);h.trigger(f,g);return f.result!==false},confirm:function(e){return confirm(e)},ajax:function(e){return c.ajax(e)},href:function(e){return e.attr("href")},handleRemote:function(k){var e,f,j,n,h,i,m,o;if(b.fire(k,"ajax:before")){n=k.data("cross-domain");h=n===d?null:n;i=k.data("with-credentials")||null;m=k.data("type")||(c.ajaxSettings&&c.ajaxSettings.dataType);if(k.is("form")){e=k.attr("method");f=k.attr("action");j=k.serializeArray();var l=k.data("ujs:submit-button");if(l){j.push(l);k.data("ujs:submit-button",null)}}else{if(k.is(b.inputChangeSelector)){e=k.data("method");f=k.data("url");j=k.serialize();if(k.data("params")){j=j+"&"+k.data("params")}}else{e=k.data("method");f=b.href(k);j=k.data("params")||null}}o={type:e||"GET",data:j,dataType:m,beforeSend:function(q,p){if(p.dataType===d){q.setRequestHeader("accept","*/*;q=0.5, "+p.accepts.script)}return b.fire(k,"ajax:beforeSend",[q,p])},success:function(q,p,r){k.trigger("ajax:success",[q,p,r])},complete:function(q,p){k.trigger("ajax:complete",[q,p])},error:function(r,p,q){k.trigger("ajax:error",[r,p,q])},xhrFields:{withCredentials:i},crossDomain:h};if(f){o.url=f}var g=b.ajax(o);k.trigger("ajax:send",g);return g}else{return false}},handleMethod:function(i){var f=b.href(i),l=i.data("method"),j=i.attr("target"),g=c("meta[name=csrf-token]").attr("content"),k=c("meta[name=csrf-param]").attr("content"),h=c('<form method="post" action="'+f+'"></form>'),e='<input name="_method" value="'+l+'" type="hidden" />';if(k!==d&&g!==d){e+='<input name="'+k+'" value="'+g+'" type="hidden" />'}if(j){h.attr("target",j)}h.hide().append(e).appendTo("body");h.submit()},disableFormElements:function(e){e.find(b.disableSelector).each(function(){var f=c(this),g=f.is("button")?"html":"val";f.data("ujs:enable-with",f[g]());f[g](f.data("disable-with"));f.prop("disabled",true)})},enableFormElements:function(e){e.find(b.enableSelector).each(function(){var f=c(this),g=f.is("button")?"html":"val";if(f.data("ujs:enable-with")){f[g](f.data("ujs:enable-with"))}f.prop("disabled",false)})},allowAction:function(e){var f=e.data("confirm"),g=false,h;if(!f){return true}if(b.fire(e,"confirm")){g=b.confirm(f);h=b.fire(e,"confirm:complete",[g])}return g&&h},blankInputs:function(k,h,j){var g=c(),i,f,e=h||"input,textarea",l=k.find(e);l.each(function(){i=c(this);f=i.is(":checkbox,:radio")?i.is(":checked"):i.val();if(!f===!j){if(i.is(":radio")&&l.filter('input:radio:checked[name="'+i.attr("name")+'"]').length){return true}g=g.add(i)}});return g.length?g:false},nonBlankInputs:function(f,e){return b.blankInputs(f,e,true)},stopEverything:function(f){c(f.target).trigger("ujs:everythingStopped");f.stopImmediatePropagation();return false},callFormSubmitBindings:function(g,f){var e=g.data("events"),h=true;if(e!==d&&e.submit!==d){c.each(e.submit,function(j,k){if(typeof k.handler==="function"){return h=k.handler(f)}})}return h},disableElement:function(e){e.data("ujs:enable-with",e.html());e.html(e.data("disable-with"));e.bind("click.railsDisable",function(f){return b.stopEverything(f)})},enableElement:function(e){if(e.data("ujs:enable-with")!==d){e.html(e.data("ujs:enable-with"));e.data("ujs:enable-with",false)}e.unbind("click.railsDisable")}};if(b.fire(c(document),"rails:attachBindings")){c.ajaxPrefilter(function(e,g,f){if(!e.crossDomain){b.CSRFProtection(f)}});c(document).delegate(b.linkDisableSelector,"ajax:complete",function(){b.enableElement(c(this))});c(document).delegate(b.linkClickSelector,"click.rails",function(i){var g=c(this),j=g.data("method"),h=g.data("params");if(!b.allowAction(g)){return b.stopEverything(i)}if(g.is(b.linkDisableSelector)){b.disableElement(g)}if(g.data("remote")!==d){if((i.metaKey||i.ctrlKey)&&(!j||j==="GET")&&!h){return true}var f=b.handleRemote(g);if(f===false){b.enableElement(g)}else{f.error(function(){b.enableElement(g)})}return false}else{if(g.data("method")){b.handleMethod(g);return false}}});c(document).delegate(b.inputChangeSelector,"change.rails",function(g){var f=c(this);if(!b.allowAction(f)){return b.stopEverything(g)}b.handleRemote(f);return false});c(document).delegate(b.formSubmitSelector,"submit.rails",function(k){var h=c(this),j=h.data("remote")!==d,g=b.blankInputs(h,b.requiredInputSelector),f=b.nonBlankInputs(h,b.fileInputSelector);if(!b.allowAction(h)){return b.stopEverything(k)}if(g&&h.attr("novalidate")==d&&b.fire(h,"ajax:aborted:required",[g])){return b.stopEverything(k)}if(j){if(f){setTimeout(function(){b.disableFormElements(h)},13);var i=b.fire(h,"ajax:aborted:file",[f]);if(!i){setTimeout(function(){b.enableFormElements(h)},13)}return i}if(!c.support.submitBubbles&&c().jquery<"1.7"&&b.callFormSubmitBindings(h,k)===false){return b.stopEverything(k)}b.handleRemote(h);return false}else{setTimeout(function(){b.disableFormElements(h)},13)}});c(document).delegate(b.formInputClickSelector,"click.rails",function(g){var f=c(this);if(!b.allowAction(f)){return b.stopEverything(g)}var e=f.attr("name"),h=e?{name:e,value:f.val()}:null;f.closest("form").data("ujs:submit-button",h)});c(document).delegate(b.formSubmitSelector,"ajax:beforeSend.rails",function(e){if(this==e.target){b.disableFormElements(c(this))}});c(document).delegate(b.formSubmitSelector,"ajax:complete.rails",function(e){if(this==e.target){b.enableFormElements(c(this))}});c(function(){csrf_token=c("meta[name=csrf-token]").attr("content");csrf_param=c("meta[name=csrf-param]").attr("content");c('form input[name="'+csrf_param+'"]').val(csrf_token)})}})(jQuery);