/*
  jQuery Wookmark plugin 0.5
  @name jquery.wookmark.js
  @author Christoph Ono (chri@sto.ph or @gbks)
  @version 0.5
  @date 3/19/2012
  @category jQuery plugin
  @copyright (c) 2009-2012 Christoph Ono (www.wookmark.com)
  @license Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
*/
$.fn.wookmark=function(a){if(!this.wookmarkOptions){this.wookmarkOptions=$.extend({container:$("#contentB"),offset:17,autoResize:false,itemWidth:$(this[0]).outerWidth(),resizeDelay:50},a)}else{if(a){this.wookmarkOptions=$.extend(this.wookmarkOptions,a)}}if(!this.wookmarkColumns){this.wookmarkColumns=null;this.wookmarkContainerWidth=null}this.wookmarkLayout=function(){var e=this.wookmarkOptions.itemWidth+this.wookmarkOptions.offset;var d=this.wookmarkOptions.container.width();var c=Math.floor((d+this.wookmarkOptions.offset)/e);var f=Math.round((d-(c*e-this.wookmarkOptions.offset))/2);var b=0;if(this.wookmarkColumns!=null&&this.wookmarkColumns.length==c){b=this.wookmarkLayoutColumns(e,f)}else{b=this.wookmarkLayoutFull(e,c,f)}this.wookmarkOptions.container.css("height",b+"px")};this.wookmarkLayoutFull=function(e,g,j){var n=[];while(n.length<g){n.push(0)}this.wookmarkColumns=[];while(this.wookmarkColumns.length<g){this.wookmarkColumns.push([])}var p,o,f,l=0,h=0,d=this.length,m=null,c=null,b=0;for(;l<d;l++){p=$(this[l]);m=null;c=0;for(h=0;h<g;h++){if(m==null||n[h]<m){m=n[h];c=h}}p.css({position:"absolute",top:m+"px",left:(c*e+j)+"px"});n[c]=m+p.outerHeight()+this.wookmarkOptions.offset;b=Math.max(b,n[c]);this.wookmarkColumns[c].push(p)}return b};this.wookmarkLayoutColumns=function(c,g){var l=[];while(l.length<this.wookmarkColumns.length){l.push(0)}var j=0,d=this.wookmarkColumns.length,e;var f=0,h,m;var b=0;for(;j<d;j++){e=this.wookmarkColumns[j];h=e.length;for(f=0;f<h;f++){m=e[f];m.css({left:(j*c+g)+"px",top:l[j]+"px"});l[j]+=m.outerHeight()+this.wookmarkOptions.offset;b=Math.max(b,l[j])}}return b};this.wookmarkResizeTimer=null;if(!this.wookmarkResizeMethod){this.wookmarkResizeMethod=null}if(this.wookmarkOptions.autoResize){this.wookmarkOnResize=function(b){if(this.wookmarkResizeTimer){clearTimeout(this.wookmarkResizeTimer)}this.wookmarkResizeTimer=setTimeout($.proxy(this.wookmarkLayout,this),this.wookmarkOptions.resizeDelay)};if(!this.wookmarkResizeMethod){this.wookmarkResizeMethod=$.proxy(this.wookmarkOnResize,this)}$(window).resize(this.wookmarkResizeMethod)}this.wookmarkClear=function(){if(this.wookmarkResizeTimer){clearTimeout(this.wookmarkResizeTimer);this.wookmarkResizeTimer=null}if(this.wookmarkResizeMethod){$(window).unbind("resize",this.wookmarkResizeMethod)}};this.wookmarkLayout();this.show()};(function(){tuan800ued.addModule("guang",{OnLoad:function(){var a=$.cookie("isAdGuang")||"show";if(a=="show"){$("#adA").find(".close").click(function(){$(this).parents("#adA").remove();$.cookie("isAdGuang","hide")})}else{if(a=="hide"){$("#adA").remove()}}$("#contentB .deal img").lazyload();$("#contentB .deal").wookmark()}})})(jQuery);(function(a){tuan800ued.addModule("scrollFollow",{OnLoad:function(d,e){if(a("#gnav").length<1){return false}var c=a("#gnav"),b=c.offset().top;a(window).scroll(function(){var f=document.body.scrollTop===0?document.documentElement.scrollTop:document.body.scrollTop;if(f>b){if(!c.hasClass("tb-sticky-tabbar")){c.addClass("tb-sticky-tabbar")}}else{if(c.hasClass("tb-sticky-tabbar")){c.removeClass("tb-sticky-tabbar")}}})}})})(jQuery);(function(a){tuan800ued.addModule("guang_search",{OnLoad:function(b,c){a("#etsearch .inp").focus(function(){if(a(this).val()=="使用“一淘”搜全网值得逛"){a(this).val("")}}).blur(function(){if(a(this).val()==""){a(this).val("使用“一淘”搜全网值得逛")}});a("#etsearch form").submit(function(){if(a("#etsearch .inp").val()=="使用“一淘”搜全网值得逛"||a("#etsearch .inp").val()==""){alert("请输入关键词");return false}a("#etsearch .inp").val(a.trim(a("#etsearch .inp").val()));var d=new Image(1,1);d.src="http://www.tuan800.com/tongji/guang_etao_query.gif?w="+encodeURIComponent(a.trim(a("#etsearch .inp").val()))})}})})(jQuery);(function(a){tuan800ued.addModule("addborder",{OnLoad:function(b,c){a(".blockAD").hover(function(){a(this).children("div").addClass("addborder")},function(){a(this).children("div").removeClass("addborder")})}})})(jQuery);